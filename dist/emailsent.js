document.addEventListener("DOMContentLoaded",function(){window.gol={cellColor:"#37474f",canvas:document.getElementById("gol"),ctx:document.getElementById("gol").getContext("2d"),fps:15,idealCellSize:20,cellSize:[20,20],boardSize:[10,10],board:void 0,_getBlankBoard:function(){for(var o=[],t=0;t<this.boardSize[0];t++)o.push(new Array(this.boardSize[1]).fill(!1));return o},sizeChanged:function(){var o,t,e=gol.canvas.offsetWidth,r=gol.canvas.offsetHeight;gol.canvas.setAttribute("width",e),gol.canvas.setAttribute("height",r),gol.cellSize=[e/Math.round(e/gol.idealCellSize),r/Math.round(r/gol.idealCellSize)];var i=gol.boardSize;gol.boardSize=[Math.round(e/gol.cellSize[0]),Math.round(r/gol.cellSize[1])];var a=[gol.boardSize[0]-i[0],gol.boardSize[1]-i[1]];if(a[0]<0&&(gol.board=gol.board.slice(0,gol.boardSize[0])),a[1]<0)for(o=0;o<gol.board.length;o++)gol.board[o]=gol.board[o].slice(0,gol.boardSize[1]);for(o=0;o<a[0];o++){for(newRow=new Array(gol.boardSize[0]).fill(!1),t=0;t<newRow.length;t++)newRow[t]=Math.random()<.125;gol.board.push(newRow)}for(o=0;o<a[1];o++)for(t=0;t<gol.board.length;t++)gol.board[t].push(Math.random()<.125);gol.redraw()},randomize:function(){for(var o=this.boardSize[0],t=this.boardSize[1],e=0;e<o;e++)for(var r=0;r<t;r++)this.board[e][r]=Math.random()<.125},redraw:function(){var o=this.canvas.getAttribute("width"),t=this.canvas.getAttribute("height");this.ctx.clearRect(0,0,o,t),this.ctx.fillStyle=this.cellColor;for(var e=0;e<this.boardSize[0];e++)for(var r=0;r<this.boardSize[1];r++)this.board[e][r]&&this.ctx.fillRect(this.cellSize[0]*e,this.cellSize[1]*r,this.cellSize[0],this.cellSize[1])},countLiveNeighbors:function(o,t){total=0,xroomneg=o>0,yroomneg=t>0,xroompos=o<this.boardSize[0]-1,yroompos=t<this.boardSize[1]-1,neighbors=[yroomneg&&this.board[o][t-1],xroompos&&yroomneg&&this.board[o+1][t-1],xroompos&&this.board[o+1][t],xroompos&&yroompos&&this.board[o+1][t+1],yroompos&&this.board[o][t+1],xroomneg&&yroompos&&this.board[o-1][t+1],xroomneg&&this.board[o-1][t],xroomneg&&yroompos&&this.board[o-1][t-1]];for(var e=0;e<neighbors.length;e++)total+=neighbors[e];return total},judgeFate:function(o,t){return o?2===t||3===t:3===t},step:function(){newState=this._getBlankBoard();for(var o=0;o<this.boardSize[0];o++)for(var t=0;t<this.boardSize[1];t++)newState[o][t]=this.judgeFate(this.board[o][t],this.countLiveNeighbors(o,t));this.board=newState},interacted:function(o){var t=gol.canvas.getBoundingClientRect(),e=o.clientX,r=o.clientY;if(e>t.left&&r>t.top&&e<t.right&&r<t.bottom){var i=e-t.left,a=r-t.top,l=Math.floor(i/gol.cellSize[0]),n=Math.floor(a/gol.cellSize[1]);gol.board[l][n]=!0}},start:function(){gol.step(),gol.redraw(),setTimeout(function(){requestAnimationFrame(gol.start)},1e3/gol.fps)},init:function(){this.board=this._getBlankBoard(),this.sizeChanged(),this.board=this._getBlankBoard(),this.randomize(),this.start()}},window.addEventListener("resize",gol.sizeChanged),document.addEventListener("mousemove",gol.interacted),gol.init()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvbC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJnb2wiLCJjZWxsQ29sb3IiLCJjYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsImdldENvbnRleHQiLCJmcHMiLCJpZGVhbENlbGxTaXplIiwiY2VsbFNpemUiLCJib2FyZFNpemUiLCJib2FyZCIsInVuZGVmaW5lZCIsIl9nZXRCbGFua0JvYXJkIiwiYXJyYXkiLCJpIiwidGhpcyIsInB1c2giLCJBcnJheSIsImZpbGwiLCJzaXplQ2hhbmdlZCIsImsiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwic2V0QXR0cmlidXRlIiwiTWF0aCIsInJvdW5kIiwib2xkQm9hcmRTaXplIiwiZGlmZiIsInNsaWNlIiwibGVuZ3RoIiwibmV3Um93IiwicmFuZG9tIiwicmVkcmF3IiwicmFuZG9taXplIiwieCIsInkiLCJnZXRBdHRyaWJ1dGUiLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImNvdW50TGl2ZU5laWdoYm9ycyIsInRvdGFsIiwieHJvb21uZWciLCJ5cm9vbW5lZyIsInhyb29tcG9zIiwieXJvb21wb3MiLCJuZWlnaGJvcnMiLCJqdWRnZUZhdGUiLCJpc0xpdmUiLCJsaXZlTmVpZ2hib3JzIiwic3RlcCIsIm5ld1N0YXRlIiwiaW50ZXJhY3RlZCIsImUiLCJiYm94IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYWJzeCIsImNsaWVudFgiLCJhYnN5IiwiY2xpZW50WSIsImxlZnQiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsInJlbHgiLCJyZWx5IiwiY2VsbHgiLCJmbG9vciIsImNlbGx5Iiwic3RhcnQiLCJzZXRUaW1lb3V0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaW5pdCJdLCJtYXBwaW5ncyI6IkFBRUFBLFNBQUFDLGlCQUFBLG1CQUFBLFdBQ0FDLE9BQUFDLEtBS0FDLFVBQUEs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QyxFQUFBSCxFQUFBSSxRQUFBQyxFQUFBTCxFQUFBTSxPQUdBLElBQUFILEVBQUFGLEVBQUFNLE1BQ0FGLEVBQUFKLEVBQUFPLEtBQ0FMLEVBQUFGLEVBQUFRLE9BQ0FKLEVBQUFKLEVBQUFTLE9BQ0EsQ0FFQSxHQUFBQyxHQUFBUixFQUFBRixFQUFBTSxLQUNBSyxFQUFBUCxFQUFBSixFQUFBTyxJQUVBSyxFQUFBMUMsS0FBQTJDLE1BQUFILEVBQUFsRSxJQUFBUSxTQUFBLElBQ0E4RCxFQUFBNUMsS0FBQTJDLE1BQUFGLEVBQUFuRSxJQUFBUSxTQUFBLEdBRUFSLEtBQUFVLE1BQUEwRCxHQUFBRSxJQUFBLElBVUFDLE1BQUEsV0FDQXZFLElBQUFvRCxPQUNBcEQsSUFBQWtDLFNBQ0FzQyxXQUFBLFdBQ0FDLHNCQUFBekUsSUFBQXVFLFFBQ0EsSUFBQXZFLElBQUFNLE1BTUFvRSxLQUFBLFdBRUEzRCxLQUFBTCxNQUFBSyxLQUFBSCxpQkFFQUcsS0FBQUksY0FFQUosS0FBQUwsTUFBQUssS0FBQUgsaUJBQ0FHLEtBQUFvQixZQUNBcEIsS0FBQXdELFVBT0F4RSxPQUFBRCxpQkFBQSxTQUFBRSxJQUFBbUIsYUFDQXRCLFNBQUFDLGlCQUFBLFlBQUFFLElBQUFzRCxZQUNBdEQsSUFBQTBFIiwiZmlsZSI6ImVtYWlsc2VudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIENvbndheSdzIEdhbWUgb2YgTGlmZSAqL1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gIHdpbmRvdy5nb2wgPSB7XG5cblxuICAgIC8vIEJBU0lDIEFUVFJJQlVURVMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgY2VsbENvbG9yOiBcIiMzNzQ3NGZcIixcbiAgICBjYW52YXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ29sXCIpLFxuICAgIGN0eDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnb2xcIikuZ2V0Q29udGV4dChcIjJkXCIpLFxuXG4gICAgZnBzOiAxNSxcblxuICAgIGlkZWFsQ2VsbFNpemU6IDIwLFxuICAgIGNlbGxTaXplOiBbMjAsIDIwXSwgLy8gVGhpcyBnZXRzIHVwZGF0ZWQgZHluYW1pY2FsbHkuXG5cbiAgICBib2FyZFNpemU6IFsxMCwgMTBdLFxuXG4gICAgYm9hcmQ6IHVuZGVmaW5lZCxcblxuXG4gICAgLy8gSEVMUEVSIEZVTkNUSU9OUyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICAgIF9nZXRCbGFua0JvYXJkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMuYm9hcmRTaXplWzBdOyBpKyspIHtcbiAgICAgICAgYXJyYXkucHVzaChcbiAgICAgICAgICBuZXcgQXJyYXkodGhpcy5ib2FyZFNpemVbMV0pLmZpbGwoZmFsc2UpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfSxcblxuXG4gICAgLy8gUkVOREVSSU5HIEZVTkNUSU9OUyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gVGhlc2UgZnVuY3Rpb25zIGNvbm5lY3QgdGhlIHNpbXVsYXRpb24gdG8gdGhlIGJyb3dzZXJcblxuXG4gICAgLy8gQ2FsbGVkIHRvIHVwZGF0ZSB0aGUgZ2FtZSBpZiB0aGUgY2FudmFzIHNpemVcbiAgICAvLyBjaGFuZ2VzLlxuXG4gICAgc2l6ZUNoYW5nZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIGssICAvLyBTcGFyZSBsb29wIHZhcmlhYmxlc1xuICAgICAgICAgIHdpZHRoID0gZ29sLmNhbnZhcy5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQgPSBnb2wuY2FudmFzLm9mZnNldEhlaWdodDtcblxuICAgICAgLy8gVXBkYXRlIGNhbnZhcyBjb29yZGluYXRlIHN5c3RlbVxuICAgICAgZ29sLmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB3aWR0aCk7XG4gICAgICBnb2wuY2FudmFzLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBoZWlnaHQpO1xuXG4gICAgICAvLyBVcGRhdGUgdGlsZSBzaXplIGJ5IGZpbmRpbmcgYSB3aWR0aCB0aGF0IHdpbGxcbiAgICAgIC8vIGV2ZW5seSBmaWxsIHRoZSBjYW52YXMgYW5kIGlzIGNsb3Nlc3QgdG8gdGhlXG4gICAgICAvLyBpZGVhbENlbGxTaXplLCB0aGVuIGRvaW5nIHRoZSBzYW1lIHRoaW5nIGZvclxuICAgICAgLy8gaGVpZ2h0LlxuXG4gICAgICBnb2wuY2VsbFNpemUgPSBbXG4gICAgICAgIHdpZHRoIC8gTWF0aC5yb3VuZCh3aWR0aCAvIGdvbC5pZGVhbENlbGxTaXplKSxcbiAgICAgICAgaGVpZ2h0IC8gTWF0aC5yb3VuZChoZWlnaHQgLyBnb2wuaWRlYWxDZWxsU2l6ZSlcbiAgICAgIF07XG5cbiAgICAgIC8vIFdoZW4gYm9hcmQgc2l6ZSBjaGFuZ2VzLCBraWxsIGNlbGxzIHRoYXQgYXJlXG4gICAgICAvLyBjdXQgb2ZmIGFuZCByYW5kb21pemUgbmV3IHRlcnJhaW4uXG5cbiAgICAgIHZhciBvbGRCb2FyZFNpemUgPSBnb2wuYm9hcmRTaXplOyAgLy8gU3RvcmUgb2xkIHNpemVcbiAgICAgIGdvbC5ib2FyZFNpemUgPSBbICAvLyBBZGp1c3Qgc2l6ZVxuICAgICAgICBNYXRoLnJvdW5kKHdpZHRoIC8gZ29sLmNlbGxTaXplWzBdKSxcbiAgICAgICAgTWF0aC5yb3VuZChoZWlnaHQgLyBnb2wuY2VsbFNpemVbMV0pXG4gICAgICBdO1xuICAgICAgdmFyIGRpZmYgPSBbICAvLyBDYWxjdWxhdGUgc2l6ZSBkaWZmZXJlbmNlXG4gICAgICAgIGdvbC5ib2FyZFNpemVbMF0gLSBvbGRCb2FyZFNpemVbMF0sXG4gICAgICAgIGdvbC5ib2FyZFNpemVbMV0gLSBvbGRCb2FyZFNpemVbMV1cbiAgICAgIF07XG5cbiAgICAgIC8vIEtpbGwgZGVhZCBjZWxsc1xuXG4gICAgICBpZiAoZGlmZlswXSA8IDApIHtcbiAgICAgICAgZ29sLmJvYXJkID0gZ29sLmJvYXJkLnNsaWNlKDAsIGdvbC5ib2FyZFNpemVbMF0pO1xuICAgICAgfVxuICAgICAgaWYgKGRpZmZbMV0gPCAwKSB7XG4gICAgICAgIGZvciAoaT0wOyBpPGdvbC5ib2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGdvbC5ib2FyZFtpXSA9IGdvbC5ib2FyZFtpXS5zbGljZSgwLCBnb2wuYm9hcmRTaXplWzFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQb3B1bGF0ZSBuZXcgY2VsbHNcblxuICAgICAgZm9yIChpPTA7IGk8ZGlmZlswXTsgaSsrKSB7XG4gICAgICAgIG5ld1JvdyA9IG5ldyBBcnJheShnb2wuYm9hcmRTaXplWzBdKS5maWxsKGZhbHNlKTtcbiAgICAgICAgZm9yIChrPTA7IGs8bmV3Um93Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgbmV3Um93W2tdID0gTWF0aC5yYW5kb20oKSA8IDAuMTI1O1xuICAgICAgICB9XG4gICAgICAgIGdvbC5ib2FyZC5wdXNoKG5ld1Jvdyk7XG4gICAgICB9XG4gICAgICBmb3IgKGk9MDsgaTxkaWZmWzFdOyBpKyspIHtcbiAgICAgICAgZm9yIChrPTA7IGs8Z29sLmJvYXJkLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgZ29sLmJvYXJkW2tdLnB1c2goTWF0aC5yYW5kb20oKSA8IDAuMTI1KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBnb2wucmVkcmF3KCk7XG4gICAgfSxcblxuXG4gICAgLy8gUmFuZG9taXplIHRoZSBnYW1lIHN0YXRlXG5cbiAgICByYW5kb21pemU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHdpZHRoID0gdGhpcy5ib2FyZFNpemVbMF0sXG4gICAgICAgICAgaGVpZ2h0ID0gdGhpcy5ib2FyZFNpemVbMV07XG5cbiAgICAgIGZvciAodmFyIHg9MDsgeDx3aWR0aDsgeCsrKSB7XG4gICAgICAgIGZvciAodmFyIHk9MDsgeTxoZWlnaHQ7IHkrKykge1xuICAgICAgICAgIHRoaXMuYm9hcmRbeF1beV0gPSBNYXRoLnJhbmRvbSgpIDwgMC4xMjU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgICAvLyBSZW5kZXIgdGhlIGJvYXJkIG9uIHRoZSBjYW52YXNcblxuICAgIHJlZHJhdzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgd2lkdGggPSB0aGlzLmNhbnZhcy5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSxcbiAgICAgICAgICBoZWlnaHQgPSB0aGlzLmNhbnZhcy5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIik7XG4gICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNlbGxDb2xvcjtcbiAgICAgIC8vIFJlbmRlciBib2FyZFxuICAgICAgZm9yICh2YXIgeD0wOyB4PHRoaXMuYm9hcmRTaXplWzBdOyB4KyspIHtcbiAgICAgICAgZm9yICh2YXIgeT0wOyB5PHRoaXMuYm9hcmRTaXplWzFdOyB5KyspIHtcbiAgICAgICAgICBpZiAodGhpcy5ib2FyZFt4XVt5XSkge1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoXG4gICAgICAgICAgICAgIHRoaXMuY2VsbFNpemVbMF0gKiB4LFxuICAgICAgICAgICAgICB0aGlzLmNlbGxTaXplWzFdICogeSxcbiAgICAgICAgICAgICAgdGhpcy5jZWxsU2l6ZVswXSxcbiAgICAgICAgICAgICAgdGhpcy5jZWxsU2l6ZVsxXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgICAvLyBHQU1FIExPR0lDID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gICAgY291bnRMaXZlTmVpZ2hib3JzOiBmdW5jdGlvbih4LCB5KSB7XG4gICAgICB0b3RhbCA9IDA7XG5cbiAgICAgIC8vIElzIHRoZXJlIHJvb20gaW4gZGlyZWN0aW9ucyBvZjpcbiAgICAgIC8vICAgLSBuZWdhdGl2ZSB4XG4gICAgICAvLyAgIC0gbmVnYXRpdmUgeVxuICAgICAgLy8gICAtIHBvc2l0aXZlIHhcbiAgICAgIC8vICAgLSBwb3NpdGl2ZSB5XG4gICAgICB4cm9vbW5lZyA9IHggPiAwO1xuICAgICAgeXJvb21uZWcgPSB5ID4gMDtcbiAgICAgIHhyb29tcG9zID0geCA8IHRoaXMuYm9hcmRTaXplWzBdIC0gMTtcbiAgICAgIHlyb29tcG9zID0geSA8IHRoaXMuYm9hcmRTaXplWzFdIC0gMTtcblxuICAgICAgbmVpZ2hib3JzID0gW1xuICAgICAgICAvLyBhYm92ZVxuICAgICAgICB5cm9vbW5lZyAmJiB0aGlzLmJvYXJkW3hdW3ktMV0sXG4gICAgICAgIC8vIGFib3ZlIHJpZ2h0XG4gICAgICAgIHhyb29tcG9zICYmIHlyb29tbmVnICYmIHRoaXMuYm9hcmRbeCsxXVt5LTFdLFxuICAgICAgICAvLyByaWdodFxuICAgICAgICB4cm9vbXBvcyAmJiB0aGlzLmJvYXJkW3grMV1beV0sXG4gICAgICAgIC8vIGJlbG93IHJpZ2h0XG4gICAgICAgIHhyb29tcG9zICYmIHlyb29tcG9zICYmIHRoaXMuYm9hcmRbeCsxXVt5KzFdLFxuICAgICAgICAvLyBiZWxvd1xuICAgICAgICB5cm9vbXBvcyAmJiB0aGlzLmJvYXJkW3hdW3krMV0sXG4gICAgICAgIC8vIGJlbG93IGxlZnRcbiAgICAgICAgeHJvb21uZWcgJiYgeXJvb21wb3MgJiYgdGhpcy5ib2FyZFt4LTFdW3krMV0sXG4gICAgICAgIC8vIGxlZnRcbiAgICAgICAgeHJvb21uZWcgJiYgdGhpcy5ib2FyZFt4LTFdW3ldLFxuICAgICAgICAvLyBhYm92ZSBhbmQgbGVmdFxuICAgICAgICB4cm9vbW5lZyAmJiB5cm9vbXBvcyAmJiB0aGlzLmJvYXJkW3gtMV1beS0xXVxuICAgICAgXTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxuZWlnaGJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdG90YWwgKz0gbmVpZ2hib3JzW2ldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRvdGFsO1xuICAgIH0sXG5cbiAgICBqdWRnZUZhdGU6IGZ1bmN0aW9uKGlzTGl2ZSwgbGl2ZU5laWdoYm9ycykge1xuICAgICAgaWYgKGlzTGl2ZSkge1xuICAgICAgICAvLyBBbnkgbGl2ZSBjZWxsIHdpdGggZmV3ZXIgdGhhbiAyIGxpdmUgbmVpZ2hib3JzXG4gICAgICAgIC8vIGRpZXMgb2YgdW5kZXJwb3B1bGF0aW9uOyBhbnkgbGl2ZSBjZWxsIHdpdGggbW9yZVxuICAgICAgICAvLyB0aGFuIHRocmVlIGRpZXMgb2Ygb3ZlcnBvcHVsYXRpb24uXG4gICAgICAgIHJldHVybiAobGl2ZU5laWdoYm9ycyA9PT0gMiB8fCBsaXZlTmVpZ2hib3JzID09PSAzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFueSBkZWFkIGNlbGwgd2l0aCBleGFjdGx5IDMgbmVpZ2hib3JzIGlzIGJvcm5cbiAgICAgICAgcmV0dXJuIGxpdmVOZWlnaGJvcnMgPT09IDM7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0ZXA6IGZ1bmN0aW9uKCkge1xuICAgICAgbmV3U3RhdGUgPSB0aGlzLl9nZXRCbGFua0JvYXJkKCk7XG5cbiAgICAgIGZvciAodmFyIHg9MDsgeDx0aGlzLmJvYXJkU2l6ZVswXTsgeCsrKSB7XG4gICAgICAgIGZvciAodmFyIHk9MDsgeTx0aGlzLmJvYXJkU2l6ZVsxXTsgeSsrKSB7XG4gICAgICAgICAgbmV3U3RhdGVbeF1beV0gPSB0aGlzLmp1ZGdlRmF0ZShcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbeF1beV0sXG4gICAgICAgICAgICB0aGlzLmNvdW50TGl2ZU5laWdoYm9ycyh4LCB5KVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5ib2FyZCA9IG5ld1N0YXRlO1xuICAgIH0sXG5cblxuICAgIC8vIFVTRVIgSU5URVJBQ1RJT04gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgICAvLyBPbiBhIGRlc2t0b3AgY29tcHV0ZXIsIGNlbGxzIGFyZSBib3JuXG4gICAgLy8gd2hlbiBtb3VzZWQgb3Zlci4gT24gYSBtb2JpbGUgZGV2aWNlXG4gICAgLy8gaXQncyB3aGVyZXZlciBhIHRvdWNoIG9jY3VycyBvciBpcyBkcmFnZ2VkLlxuICAgIGludGVyYWN0ZWQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIFBvc2l0aW9uIG9mIHRoZSBjYW52YXMgaW4gdGhlIHZpZXdwb3J0XG4gICAgICB2YXIgYmJveCA9IGdvbC5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAvLyBQb3NpdGlvbiBvZiB0aGUgbW91c2UgaW4gdGhlIHZpZXdwb3J0XG4gICAgICAgICAgYWJzeCA9IGUuY2xpZW50WCwgYWJzeT1lLmNsaWVudFk7XG5cbiAgICAgIC8vIElmIHRoZXNlIHR3byBwb3NpdGlvbnMgaW50ZXJzZWN0OlxuICAgICAgaWYgKGFic3ggPiBiYm94LmxlZnQgICYmXG4gICAgICAgICAgYWJzeSA+IGJib3gudG9wICAgJiZcbiAgICAgICAgICBhYnN4IDwgYmJveC5yaWdodCAmJlxuICAgICAgICAgIGFic3kgPCBiYm94LmJvdHRvbVxuICAgICAgKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBtb3VzZSBwb3NpdGlvbiByZWxhdGl2ZSB0byBjYW52YXNcbiAgICAgICAgdmFyIHJlbHggPSBhYnN4IC0gYmJveC5sZWZ0LFxuICAgICAgICAgICAgcmVseSA9IGFic3kgLSBiYm94LnRvcDtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGNlbGwgcG9zaXRpb25cbiAgICAgICAgdmFyIGNlbGx4ID0gTWF0aC5mbG9vcihyZWx4IC8gZ29sLmNlbGxTaXplWzBdKSxcbiAgICAgICAgICAgIGNlbGx5ID0gTWF0aC5mbG9vcihyZWx5IC8gZ29sLmNlbGxTaXplWzFdKTtcblxuICAgICAgICBnb2wuYm9hcmRbY2VsbHhdW2NlbGx5XSA9IHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuXG4gICAgLy8gQ09OVFJPTCBGVU5DVElPTlMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICAgIC8vIEJlZ2luIHRoZSBsb29wXG5cbiAgICBzdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICBnb2wuc3RlcCgpO1xuICAgICAgZ29sLnJlZHJhdygpO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdvbC5zdGFydCk7XG4gICAgICB9LCAxMDAwIC8gZ29sLmZwcyk7XG4gICAgfSxcblxuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbmQgYmVnaW5cblxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gVGVtcG9yYXJ5IGJvYXJkXG4gICAgICB0aGlzLmJvYXJkID0gdGhpcy5fZ2V0QmxhbmtCb2FyZCgpO1xuICAgICAgLy8gQ2FsY3VsYXRlIHNpemVzXG4gICAgICB0aGlzLnNpemVDaGFuZ2VkKCk7XG4gICAgICAvLyBJbml0aWFsaXplIGJvYXJkXG4gICAgICB0aGlzLmJvYXJkID0gdGhpcy5fZ2V0QmxhbmtCb2FyZCgpO1xuICAgICAgdGhpcy5yYW5kb21pemUoKTtcbiAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICB9XG4gIH07XG5cblxuXG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZ29sLnNpemVDaGFuZ2VkKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBnb2wuaW50ZXJhY3RlZCk7XG4gIGdvbC5pbml0KCk7XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
